Borrowed heavily from [JSNotebook](https://github.com/tschoffelen/jsnotebook)